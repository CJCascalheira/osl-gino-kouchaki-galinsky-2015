---
title: "Open Stats Lab Additional Analytic Skills in R Using Data from Gino, Kouchaki, and Galinsky (2015)"
author: "Cory J. Cascalheira"
date: "December 10, 2018"
output:
  html_document:
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "~/GitHub/osl-gino-kouchaki-galinsky-2015/src")
```

# Open Stats Lab
___
Kevin P. McIntyre developed this amazing resource for students of psychology. Check out [Open Stats Lab](https://sites.trinity.edu/osl/) for a collection of all activities.

Each activity includes an article from *Psychological Science*, a data set, and an activity to complete in SPSS. However, if you are an open source fanatic, you could also complete the activity in [JASP](https://jasp-stats.org/). For tips on how to use JASP, check out [this resource](https://osf.io/t56kg/) created by Buchanan, Hopke, and Donaldson (2018).

I prefer to get my hands deep into the data. Dr. McIntyre does not *yet* offer an R activity to accompany the work of [Gino, Kouchaki, and Galinsky (2015)](https://journals.sagepub.com/stoken/default+domain/6XgDSfr6ZHSDs47tx5bu/full), so here is one possible solution written in R.

# Analysis
___
I will perform assumption checks for each test prior to running it. We already know that the data meet all assumptions, otherwise the authors would have used a different analytic approach. However, checking the assumptions is helpful because:

1. reproducibility and accuracy can be verified; and
2. if you are a student, then you should form the habit of testing assumptions.

This analysis will follow the data science workflow advocated by [Garrett Grolemund and Hadley Wickham](https://r4ds.had.co.nz/introduction.html). First, we will set-up our session and import the data. Then, we must clean the data. Next, we will transform, model, and visualize the data to understand it. Finally, we will communicate our findings.

## Import
___
We start by loading the necessary packages.

```{r message=FALSE}
library(tidyverse) # utility
library(psych) # cronbach's alpha
```

Now we can import the data set. Note the relative path since the working directory has been set.

```{r message=FALSE}
gino <- read_csv("../data/Gino Kouchaki Galinsky 2015 Experiment 3.csv")
```

## Clean
___
Unlike some data sets in the Open Stats Lab series, Dr. McIntyre chose to leave all observations in this file. That is, the data set has 291 observations instead of 288. 

```{r}
glimpse(gino)
```

It appears that we must filter for those participants who passed the manipulation check, `FAILED_MC`, excluding those who failed it. Once we do that, this variable is useless and we can drop it, along with `instr`, `filter`, `MCheck`, the demographic variables and the dummy variables. Keep only one of the two condition variables.

```{r}
gino_clean <- gino %>%
  filter(FAILED_MC == 0) %>%
  select(-c(instr, filter, CONDITION, FAILED_MC, MCheck, age, male),
         -ends_with("Dummy")) %>%
  rename(condition = condition_string)
```

A transformation of condition into a factor is necessary for the one-way ANOVAs.

```{r}
gino_clean <- within(gino_clean, {
  condition <- factor(condition)
})
```

## Understand
___
Our first task is to compute aggregate dependent measures. A chain of pipes makes this task is relatively simple in R. For each dependent measure, we will mutate a new variable that selects individual columns to compute the mean for each row. The aggregate is more useful for future analyses, so the individual measures of impurity, dissonance, and so on will be dropped.

Always save your results as new R data frames to track changes.

```{r}
(gino_means <- gino_clean %>%
  mutate(
    feelings_of_impurity = select(gino_clean, starts_with("impurity")) %>% rowMeans(),
    feelings_of_discomfort = select(gino_clean, starts_with("dissonance")) %>% rowMeans(),
    negative_affect = select(gino_clean, starts_with("neg")) %>% rowMeans(),
    positive_affect = select(gino_clean, starts_with("pos")) %>% rowMeans(),
    embarrassment = select(gino_clean, embarrassed, ashamed) %>% rowMeans(),
    self_alienation = select(gino_clean, starts_with("alien")) %>% rowMeans()
  ) %>%
  select(condition, feelings_of_impurity, feelings_of_discomfort, negative_affect,
         positive_affect, embarrassment, self_alienation, decided_to_help))
```

### Cronbach's Alpha

Cronbach's alpha is a measure of internal consistency ranging from 0 to 1. [Acceptable values](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4205511/) for the coefficient range from 0.70 to 0.95, although it has been noted that values greater than 0.90 may indicate redundancy. Longer measurement instruments increase internal consistency, but may cause redundancy.

A function exists to calculate Cronbach's alpha in `psych::alpha`. The function takes a data frame of scale items as its primary argument. Select the individual scale items prior to aggregation to compute alpha for each underlying construct.

```{r warning=FALSE}
# Cronbach's alpha for feelings of impurity
gino_clean %>%
  select(starts_with("impurity")) %>%
  psych::alpha()

# Cronbach's alpha for feelings of discomfort
gino_clean %>%
  select(starts_with("dissonance")) %>%
  psych::alpha()

# Cronbach's alpha for negative affect
gino_clean %>%
  select(starts_with("neg")) %>%
  psych::alpha()

# Cronbach's alpha for positive affect
gino_clean %>%
  select(starts_with("pos")) %>%
  psych::alpha()

# Cronbach's alpha for embarrassment
gino_clean %>%
  select(embarrassed, ashamed) %>%
  psych::alpha()

# Cronbach's alpha for self-alienation
gino_clean %>%
  select(starts_with("alien")) %>%
  psych::alpha()
```

After writing their essays, participants answered a questionnaire composed of items on a 7-point scale. The items assessed feelings of impurity ($\alpha = .94$), discomfort ($\alpha = .94$), negative ($\alpha = .93$) and positive ($\alpha = .95$) affect, embarrassment ($\alpha = .90$), and self-alienation ($\alpha = .90$).

### Descriptive Statistics

One method for calculating descriptive statistics uses a pipeline chaining `group_by()` and `summarize()`. First, we need to transform the data into long format using `gather()`. 

Although the activity does not require it, you will notice the upper and lower bounds of the 95% confidence interval in the output. Note that the confidence intervals differ slightly from those reported by Gino, Kouchaki, and Galinsky (2015), which is to be expected. Had we chosen to perform bootstrapping with a call to `quantile()`, the computed 95% confidence intervals would have likely been different from those yielded below. Slight variation of confidence intervals is acceptable.

```{r}
(gino_summary <- gino_means %>%
  select(-decided_to_help) %>%
  gather(key = item, value = score, -condition) %>%
  group_by(condition, item) %>%
  summarize(
    mean = mean(score),
    sd = sd(score),
    n = n(),
    t_star = qt(p = 0.975, df = n - 1),
    upper = mean + (t_star * (sd/sqrt(n))), 
    lower = mean - (t_star * (sd/sqrt(n)))
  ))
```

## Communicate
___
After writing their essays, participants answered a questionnaire composed of items on a 7-point scale. The items assessed feelings of impurity ($\alpha = .94$), discomfort ($\alpha = .94$), negative ($\alpha = .93$) and positive ($\alpha = .95$) affect, embarrassment ($\alpha = .90$), and self-alienation ($\alpha = .90$).

# Acknowledgements
___
I am thankful for my advisor, Dr. Brandt A. Smith for introducing me to R, JASP, and OSL. The discipline of psychology is advocating for preregistered, open materials. His encouragement to utilize open data and open source software has positioned me in the middle of the reproducible movement.

I would still be clicking checkboxes and dropdowns to analyze data if it were not for [DataCamp](https://www.datacamp.com), [Alboukadel Kassambara](http://www.sthda.com/english/wiki/r-software), [Jonathan Baron](https://www.sas.upenn.edu/~baron/from_cattell/rpsych/rpsych.html#htoc60), and the team behind [personality-project](http://personality-project.org/r/r.guide.html#withinone).

## Dependencies
This activity was completed using RStudio.

```{r}
devtools::session_info()
```